{"ast":null,"code":"import _without from \"lodash/without\";\nimport _includes from \"lodash/includes\";\nimport _values from \"lodash/values\";\nimport _orderBy from \"lodash/orderBy\";\nimport _range from \"lodash/range\";\nimport _uniq from \"lodash/uniq\";\nimport _invert from \"lodash/invert\";\nimport _isObject from \"lodash/isObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _identity from \"lodash/identity\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n/* eslint-disable func-style */\n\n\nimport React from \"react\";\nimport * as Collection from \"./collection\";\nimport * as Domain from \"./domain\";\nimport * as Helpers from \"./helpers\";\n/**\n * Returns the axis (x or y) of a particular axis component\n * @param {Object} props: the props object.\n * @param {Boolean} horizontal: true for horizontal charts\n * @returns {String} the dimension appropriate for the axis given its props\n */\n\nexport function getAxis(props) {\n  var dependentAxis = props.dependentAxis;\n  return dependentAxis ? \"y\" : \"x\";\n}\n/**\n * Returns all axis components that pass a given predicate\n * @param {Array} childComponents: an array of children\n * @param {Function} predicate: a predicate function that will be called with each\n * @returns {Array} all axis components that pass the given predicate or []\n */\n\nexport function findAxisComponents(childComponents, predicate) {\n  predicate = predicate || _identity;\n\n  var findAxes = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && predicate(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        return memo.concat(findAxes(React.Children.toArray(child.props.children)));\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findAxes(childComponents);\n}\n/**\n * Returns a single axis component of the desired axis type (x or y)\n * @param {Array} childComponents: an array of children\n * @param {String} axis: desired axis either \"x\" or \"y\".\n * @returns {ReactComponent} an axis component of the desired axis or undefined\n */\n\nexport function getAxisComponent(childComponents, axis) {\n  var matchesAxis = function (component) {\n    var type = component.type.getAxis(component.props);\n    return type === axis;\n  };\n\n  return findAxisComponents(childComponents, matchesAxis)[0];\n}\n/**\n * Returns all axis components of the desired axis type (x or y) along with any\n * parent components excluding VictoryChart\n * @param {Array} childComponents: an optional array of children.\n * @param {String} type: desired axis either \"dependent\" or \"independent\".\n * @returns {ReactComponent} an axis component of the desired type or undefined\n */\n\nexport function getAxisComponentsWithParent(childComponents, type) {\n  var matchesType = function (child) {\n    return type === \"dependent\" ? child.props.dependentAxis : !child.props.dependentAxis;\n  };\n\n  var findComponents = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && matchesType(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        var childAxis = findComponents(React.Children.toArray(child.props.children));\n        return childAxis.length > 0 ? memo.concat(child) : memo;\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findComponents(childComponents);\n}\nexport function getOrigin(domain) {\n  var getSingleOrigin = function (d) {\n    var domainMin = Math.min.apply(Math, _toConsumableArray(d));\n    var domainMax = Math.max.apply(Math, _toConsumableArray(d));\n    return domainMax < 0 ? domainMax : Math.max(0, domainMin);\n  };\n\n  return {\n    x: Collection.containsDates(domain.x) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.x))) : getSingleOrigin(domain.x),\n    y: Collection.containsDates(domain.y) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.y))) : getSingleOrigin(domain.y)\n  };\n}\nexport function getOriginSign(origin, domain) {\n  var getSign = function () {\n    return origin <= 0 && Math.max.apply(Math, _toConsumableArray(domain)) <= 0 ? \"negative\" : \"positive\";\n  };\n\n  return Collection.containsDates(domain) ? \"positive\" : getSign();\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when the axis is vertical\n */\n\nexport function isVertical(props) {\n  var orientation = props.orientation || (props.dependentAxis ? \"left\" : \"bottom\");\n  var vertical = {\n    top: false,\n    bottom: false,\n    left: true,\n    right: true\n  };\n  return vertical[orientation];\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when tickValues contain strings\n */\n\nexport function stringTicks(props) {\n  return props.tickValues !== undefined && Collection.containsStrings(props.tickValues);\n}\n\nfunction getDefaultTickFormat(props) {\n  var tickValues = props.tickValues;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var fallbackFormat = tickValues && !Collection.containsDates(tickValues) ? function (x) {\n    return x;\n  } : undefined;\n\n  if (!stringMap) {\n    return stringTicks(props) ? function (x, index) {\n      return tickValues[index];\n    } : fallbackFormat;\n  } else {\n    var invertedStringMap = stringMap && _invert(stringMap);\n\n    var tickValueArray = _orderBy(_values(stringMap), function (n) {\n      return n;\n    });\n\n    var dataNames = tickValueArray.map(function (tick) {\n      return invertedStringMap[tick];\n    }); // string ticks should have one tick of padding at the beginning\n\n    var dataTicks = [\"\"].concat(_toConsumableArray(dataNames), [\"\"]);\n    return function (x) {\n      return dataTicks[x];\n    };\n  }\n}\n\nfunction getStringTicks(props) {\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var categories = Array.isArray(props.categories) ? props.categories : props.categories && props.categories[axis];\n  var ticksFromCategories = categories && Collection.containsOnlyStrings(categories) ? categories.map(function (tick) {\n    return stringMap[tick];\n  }) : undefined;\n\n  var ticksFromStringMap = stringMap && _values(stringMap);\n\n  return ticksFromCategories && ticksFromCategories.length !== 0 ? ticksFromCategories : ticksFromStringMap;\n}\n\nfunction getTickArray(props) {\n  var tickValues = props.tickValues,\n      tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  var getTicksFromFormat = function () {\n    if (!tickFormat || !Array.isArray(tickFormat)) {\n      return undefined;\n    }\n\n    return Collection.containsStrings(tickFormat) ? tickFormat.map(function (t, i) {\n      return i;\n    }) : tickFormat;\n  };\n\n  var ticks = tickValues;\n\n  if (stringMap) {\n    ticks = getStringTicks(props);\n  }\n\n  if (tickValues && Collection.containsStrings(tickValues)) {\n    ticks = stringMap ? tickValues.map(function (tick) {\n      return stringMap[tick];\n    }) : _range(1, tickValues.length + 1);\n  }\n\n  var tickArray = ticks ? _uniq(ticks) : getTicksFromFormat(props);\n\n  var buildTickArray = function (arr) {\n    var newTickArray = [];\n    var domain = props.domain && props.domain[axis] || props.domain;\n\n    if (arr) {\n      arr.forEach(function (t, index) {\n        if (Array.isArray(domain)) {\n          if (t >= Collection.getMinValue(domain) && t <= Collection.getMaxValue(domain)) {\n            newTickArray.push({\n              value: t,\n              index: index\n            });\n          }\n        } else {\n          newTickArray.push({\n            value: t,\n            index: index\n          });\n        }\n      });\n      return newTickArray;\n    } else return undefined;\n  };\n\n  return Array.isArray(tickArray) && tickArray.length ? buildTickArray(tickArray) : undefined;\n}\n\nexport function getTickFormat(props, scale) {\n  var tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  if (!tickFormat) {\n    var defaultTickFormat = getDefaultTickFormat(props);\n    var scaleTickFormat = scale.tickFormat && _isFunction(scale.tickFormat) ? scale.tickFormat() : function (x) {\n      return x;\n    };\n    return defaultTickFormat || scaleTickFormat;\n  } else if (tickFormat && Array.isArray(tickFormat)) {\n    var tickArray = getTickArray(props);\n    var tickArrayIndices = tickArray ? tickArray.map(function (v) {\n      return v.index;\n    }) : undefined;\n    var filteredTickFormat = tickFormat.filter(function (t, index) {\n      return tickArrayIndices.includes(index);\n    });\n    return function (x, index) {\n      return filteredTickFormat[index];\n    };\n  } else if (tickFormat && _isFunction(tickFormat)) {\n    var applyStringTicks = function (tick, index, ticks) {\n      var invertedStringMap = _invert(stringMap);\n\n      var stringTickArray = ticks.map(function (t) {\n        return invertedStringMap[t];\n      });\n      return props.tickFormat(invertedStringMap[tick], index, stringTickArray);\n    };\n\n    return stringMap ? applyStringTicks : tickFormat;\n  } else {\n    return function (x) {\n      return x;\n    };\n  }\n}\n\nfunction downsampleTicks(ticks, tickCount) {\n  if (!tickCount || !Array.isArray(ticks) || ticks.length <= tickCount) {\n    return ticks;\n  }\n\n  var k = Math.floor(ticks.length / tickCount);\n  return ticks.filter(function (d, i) {\n    return i % k === 0;\n  });\n}\n\nexport function getTicks(props, scale, filterZero) {\n  var tickCount = props.tickCount;\n  var tickArray = getTickArray(props);\n  var tickValues = tickArray ? tickArray.map(function (v) {\n    return v.value;\n  }) : undefined;\n\n  if (tickValues) {\n    return downsampleTicks(tickValues, tickCount);\n  } else if (scale.ticks && _isFunction(scale.ticks)) {\n    // eslint-disable-next-line no-magic-numbers\n    var defaultTickCount = tickCount || 5;\n    var scaleTicks = scale.ticks(defaultTickCount);\n    var scaledTickArray = Array.isArray(scaleTicks) && scaleTicks.length ? scaleTicks : scale.domain();\n    var ticks = downsampleTicks(scaledTickArray, tickCount);\n\n    if (filterZero) {\n      var filteredTicks = _includes(ticks, 0) ? _without(ticks, 0) : ticks;\n      return filteredTicks.length ? filteredTicks : ticks;\n    }\n\n    return ticks;\n  }\n\n  return scale.domain();\n}\n/**\n * Returns a domain based tickValues\n * @param {Object} props: the props object\n * @param {String} axis: either x or y\n * @returns {Array} returns a domain from tickValues\n */\n//eslint-disable-next-line max-statements\n\nfunction getDomainFromData(props, axis) {\n  var polar = props.polar,\n      _props$startAngle = props.startAngle,\n      startAngle = _props$startAngle === void 0 ? 0 : _props$startAngle,\n      _props$endAngle = props.endAngle,\n      endAngle = _props$endAngle === void 0 ? 360 : _props$endAngle;\n  var tickArray = getTickArray(props);\n  var tickValues = tickArray ? tickArray.map(function (v) {\n    return v.value;\n  }) : undefined;\n\n  if (!Array.isArray(tickValues)) {\n    return undefined;\n  }\n\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var tickStrings = stringTicks(props);\n  var ticks = tickValues.map(function (value) {\n    return +value;\n  });\n  var defaultMin = tickStrings ? 1 : Collection.getMinValue(ticks);\n  var defaultMax = tickStrings ? tickValues.length : Collection.getMaxValue(ticks);\n  var min = minDomain !== undefined ? minDomain : defaultMin;\n  var max = maxDomain !== undefined ? maxDomain : defaultMax;\n  var initialDomain = Domain.getDomainFromMinMax(min, max);\n  var domain = polar && axis === \"x\" && Math.abs(startAngle - endAngle) === 360 ? Domain.getSymmetricDomain(initialDomain, ticks) : initialDomain;\n\n  if (isVertical(props) && !polar) {\n    domain.reverse();\n  }\n\n  return domain;\n} // exposed for use by VictoryChart\n\n\nexport function getDomain(props, axis) {\n  var inherentAxis = getAxis(props);\n\n  if (axis && axis !== inherentAxis) {\n    return undefined;\n  }\n\n  return Domain.createDomainFunction(getDomainFromData)(props, inherentAxis);\n}\nexport function getAxisValue(props, axis) {\n  if (!props.axisValue) {\n    return undefined;\n  }\n\n  var scaleAxis = axis === \"x\" ? \"y\" : \"x\";\n  var scale = _isObject(props.scale) && _isFunction(props.scale[scaleAxis]) ? props.scale[scaleAxis] : undefined;\n\n  if (!scale) {\n    return undefined;\n  }\n\n  var stringMapAxis = axis === \"x\" ? \"y\" : \"x\";\n  var stringMap = _isObject(props.stringMap) && props.stringMap[stringMapAxis];\n  var axisValue = stringMap && typeof props.axisValue === \"string\" ? stringMap[props.axisValue] : props.axisValue;\n  return scale(axisValue);\n}\nexport function modifyProps(props, fallbackProps) {\n  if (!_isObject(props.theme)) {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var role = \"axis\";\n\n  if (props.dependentAxis && props.theme.dependentAxis) {\n    role = \"dependentAxis\";\n  } else if (!props.dependentAxis && props.theme.independentAxis) {\n    role = \"independentAxis\";\n  }\n\n  if (role === \"axis\") {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var axisTheme = _defaults({}, props.theme[role], props.theme.axis);\n\n  var theme = _assign({}, props.theme, {\n    axis: axisTheme\n  });\n\n  return Helpers.modifyProps(_assign({}, props, {\n    theme: theme\n  }), fallbackProps, \"axis\");\n}","map":{"version":3,"sources":["/Users/paulhinh/dev/tamuhack/EduCoin/node_modules/victory-core/es/victory-util/axis.js"],"names":["_without","_includes","_values","_orderBy","_range","_uniq","_invert","_isObject","_isFunction","_identity","_defaults","_assign","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","React","Collection","Domain","Helpers","getAxis","props","dependentAxis","findAxisComponents","childComponents","predicate","findAxes","children","reduce","memo","child","type","role","concat","Children","toArray","getAxisComponent","axis","matchesAxis","component","getAxisComponentsWithParent","matchesType","findComponents","childAxis","getOrigin","domain","getSingleOrigin","d","domainMin","Math","min","apply","domainMax","max","x","containsDates","Date","y","getOriginSign","origin","getSign","isVertical","orientation","vertical","top","bottom","left","right","stringTicks","tickValues","undefined","containsStrings","getDefaultTickFormat","stringMap","fallbackFormat","index","invertedStringMap","tickValueArray","n","dataNames","map","tick","dataTicks","getStringTicks","categories","ticksFromCategories","containsOnlyStrings","ticksFromStringMap","getTickArray","tickFormat","getTicksFromFormat","t","ticks","tickArray","buildTickArray","newTickArray","forEach","getMinValue","getMaxValue","push","value","getTickFormat","scale","defaultTickFormat","scaleTickFormat","tickArrayIndices","v","filteredTickFormat","filter","includes","applyStringTicks","stringTickArray","downsampleTicks","tickCount","k","floor","getTicks","filterZero","defaultTickCount","scaleTicks","scaledTickArray","filteredTicks","getDomainFromData","polar","_props$startAngle","startAngle","_props$endAngle","endAngle","minDomain","getMinFromProps","maxDomain","getMaxFromProps","tickStrings","defaultMin","defaultMax","initialDomain","getDomainFromMinMax","abs","getSymmetricDomain","reverse","getDomain","inherentAxis","createDomainFunction","getAxisValue","axisValue","scaleAxis","stringMapAxis","modifyProps","fallbackProps","theme","independentAxis","axisTheme"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,gBAArB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;;AAEA,SAASC,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,kBAAkB,EAA7E;AAAkF;;AAErH,SAASA,kBAAT,GAA8B;AAAE,QAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;AAAyE;;AAEzG,SAASF,gBAAT,CAA0BG,IAA1B,EAAgC;AAAE,MAAIC,MAAM,CAACC,QAAP,IAAmBC,MAAM,CAACH,IAAD,CAAzB,IAAmCG,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BN,IAA/B,MAAyC,oBAAhF,EAAsG,OAAOO,KAAK,CAACC,IAAN,CAAWR,IAAX,CAAP;AAA0B;;AAElK,SAASJ,kBAAT,CAA4BD,GAA5B,EAAiC;AAAE,MAAIY,KAAK,CAACE,OAAN,CAAcd,GAAd,CAAJ,EAAwB;AAAE,SAAK,IAAIe,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAG,IAAIJ,KAAJ,CAAUZ,GAAG,CAACiB,MAAd,CAAvB,EAA8CF,CAAC,GAAGf,GAAG,CAACiB,MAAtD,EAA8DF,CAAC,EAA/D,EAAmE;AAAEC,MAAAA,IAAI,CAACD,CAAD,CAAJ,GAAUf,GAAG,CAACe,CAAD,CAAb;AAAmB;;AAAC,WAAOC,IAAP;AAAc;AAAE;AAEtK;;;AACA,OAAOE,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,UAAZ,MAA4B,cAA5B;AACA,OAAO,KAAKC,MAAZ,MAAwB,UAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,WAAzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAC7B,MAAIC,aAAa,GAAGD,KAAK,CAACC,aAA1B;AACA,SAAOA,aAAa,GAAG,GAAH,GAAS,GAA7B;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASC,kBAAT,CAA4BC,eAA5B,EAA6CC,SAA7C,EAAwD;AAC7DA,EAAAA,SAAS,GAAGA,SAAS,IAAI/B,SAAzB;;AAEA,MAAIgC,QAAQ,GAAG,UAAUC,QAAV,EAAoB;AACjC,WAAOA,QAAQ,CAACC,MAAT,CAAgB,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAC5C,UAAIA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWC,IAAX,KAAoB,MAAlC,IAA4CP,SAAS,CAACK,KAAD,CAAzD,EAAkE;AAChE,eAAOD,IAAI,CAACI,MAAL,CAAYH,KAAZ,CAAP;AACD,OAFD,MAEO,IAAIA,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYM,QAA/B,EAAyC;AAC9C,eAAOE,IAAI,CAACI,MAAL,CAAYP,QAAQ,CAACV,KAAK,CAACkB,QAAN,CAAeC,OAAf,CAAuBL,KAAK,CAACT,KAAN,CAAYM,QAAnC,CAAD,CAApB,CAAP;AACD;;AAED,aAAOE,IAAP;AACD,KARM,EAQJ,EARI,CAAP;AASD,GAVD;;AAYA,SAAOH,QAAQ,CAACF,eAAD,CAAf;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASY,gBAAT,CAA0BZ,eAA1B,EAA2Ca,IAA3C,EAAiD;AACtD,MAAIC,WAAW,GAAG,UAAUC,SAAV,EAAqB;AACrC,QAAIR,IAAI,GAAGQ,SAAS,CAACR,IAAV,CAAeX,OAAf,CAAuBmB,SAAS,CAAClB,KAAjC,CAAX;AACA,WAAOU,IAAI,KAAKM,IAAhB;AACD,GAHD;;AAKA,SAAOd,kBAAkB,CAACC,eAAD,EAAkBc,WAAlB,CAAlB,CAAiD,CAAjD,CAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASE,2BAAT,CAAqChB,eAArC,EAAsDO,IAAtD,EAA4D;AACjE,MAAIU,WAAW,GAAG,UAAUX,KAAV,EAAiB;AACjC,WAAOC,IAAI,KAAK,WAAT,GAAuBD,KAAK,CAACT,KAAN,CAAYC,aAAnC,GAAmD,CAACQ,KAAK,CAACT,KAAN,CAAYC,aAAvE;AACD,GAFD;;AAIA,MAAIoB,cAAc,GAAG,UAAUf,QAAV,EAAoB;AACvC,WAAOA,QAAQ,CAACC,MAAT,CAAgB,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAC5C,UAAIA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWC,IAAX,KAAoB,MAAlC,IAA4CS,WAAW,CAACX,KAAD,CAA3D,EAAoE;AAClE,eAAOD,IAAI,CAACI,MAAL,CAAYH,KAAZ,CAAP;AACD,OAFD,MAEO,IAAIA,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYM,QAA/B,EAAyC;AAC9C,YAAIgB,SAAS,GAAGD,cAAc,CAAC1B,KAAK,CAACkB,QAAN,CAAeC,OAAf,CAAuBL,KAAK,CAACT,KAAN,CAAYM,QAAnC,CAAD,CAA9B;AACA,eAAOgB,SAAS,CAAC5B,MAAV,GAAmB,CAAnB,GAAuBc,IAAI,CAACI,MAAL,CAAYH,KAAZ,CAAvB,GAA4CD,IAAnD;AACD;;AAED,aAAOA,IAAP;AACD,KATM,EASJ,EATI,CAAP;AAUD,GAXD;;AAaA,SAAOa,cAAc,CAAClB,eAAD,CAArB;AACD;AACD,OAAO,SAASoB,SAAT,CAAmBC,MAAnB,EAA2B;AAChC,MAAIC,eAAe,GAAG,UAAUC,CAAV,EAAa;AACjC,QAAIC,SAAS,GAAGC,IAAI,CAACC,GAAL,CAASC,KAAT,CAAeF,IAAf,EAAqBpD,kBAAkB,CAACkD,CAAD,CAAvC,CAAhB;AACA,QAAIK,SAAS,GAAGH,IAAI,CAACI,GAAL,CAASF,KAAT,CAAeF,IAAf,EAAqBpD,kBAAkB,CAACkD,CAAD,CAAvC,CAAhB;AACA,WAAOK,SAAS,GAAG,CAAZ,GAAgBA,SAAhB,GAA4BH,IAAI,CAACI,GAAL,CAAS,CAAT,EAAYL,SAAZ,CAAnC;AACD,GAJD;;AAMA,SAAO;AACLM,IAAAA,CAAC,EAAErC,UAAU,CAACsC,aAAX,CAAyBV,MAAM,CAACS,CAAhC,IAAqC,IAAIE,IAAJ,CAASP,IAAI,CAACC,GAAL,CAASC,KAAT,CAAeF,IAAf,EAAqBpD,kBAAkB,CAACgD,MAAM,CAACS,CAAR,CAAvC,CAAT,CAArC,GAAoGR,eAAe,CAACD,MAAM,CAACS,CAAR,CADjH;AAELG,IAAAA,CAAC,EAAExC,UAAU,CAACsC,aAAX,CAAyBV,MAAM,CAACY,CAAhC,IAAqC,IAAID,IAAJ,CAASP,IAAI,CAACC,GAAL,CAASC,KAAT,CAAeF,IAAf,EAAqBpD,kBAAkB,CAACgD,MAAM,CAACY,CAAR,CAAvC,CAAT,CAArC,GAAoGX,eAAe,CAACD,MAAM,CAACY,CAAR;AAFjH,GAAP;AAID;AACD,OAAO,SAASC,aAAT,CAAuBC,MAAvB,EAA+Bd,MAA/B,EAAuC;AAC5C,MAAIe,OAAO,GAAG,YAAY;AACxB,WAAOD,MAAM,IAAI,CAAV,IAAeV,IAAI,CAACI,GAAL,CAASF,KAAT,CAAeF,IAAf,EAAqBpD,kBAAkB,CAACgD,MAAD,CAAvC,KAAoD,CAAnE,GAAuE,UAAvE,GAAoF,UAA3F;AACD,GAFD;;AAIA,SAAO5B,UAAU,CAACsC,aAAX,CAAyBV,MAAzB,IAAmC,UAAnC,GAAgDe,OAAO,EAA9D;AACD;AACD;AACA;AACA;AACA;;AAEA,OAAO,SAASC,UAAT,CAAoBxC,KAApB,EAA2B;AAChC,MAAIyC,WAAW,GAAGzC,KAAK,CAACyC,WAAN,KAAsBzC,KAAK,CAACC,aAAN,GAAsB,MAAtB,GAA+B,QAArD,CAAlB;AACA,MAAIyC,QAAQ,GAAG;AACbC,IAAAA,GAAG,EAAE,KADQ;AAEbC,IAAAA,MAAM,EAAE,KAFK;AAGbC,IAAAA,IAAI,EAAE,IAHO;AAIbC,IAAAA,KAAK,EAAE;AAJM,GAAf;AAMA,SAAOJ,QAAQ,CAACD,WAAD,CAAf;AACD;AACD;AACA;AACA;AACA;;AAEA,OAAO,SAASM,WAAT,CAAqB/C,KAArB,EAA4B;AACjC,SAAOA,KAAK,CAACgD,UAAN,KAAqBC,SAArB,IAAkCrD,UAAU,CAACsD,eAAX,CAA2BlD,KAAK,CAACgD,UAAjC,CAAzC;AACD;;AAED,SAASG,oBAAT,CAA8BnD,KAA9B,EAAqC;AACnC,MAAIgD,UAAU,GAAGhD,KAAK,CAACgD,UAAvB;AACA,MAAIhC,IAAI,GAAGjB,OAAO,CAACC,KAAD,CAAlB;AACA,MAAIoD,SAAS,GAAGpD,KAAK,CAACoD,SAAN,IAAmBpD,KAAK,CAACoD,SAAN,CAAgBpC,IAAhB,CAAnC;AACA,MAAIqC,cAAc,GAAGL,UAAU,IAAI,CAACpD,UAAU,CAACsC,aAAX,CAAyBc,UAAzB,CAAf,GAAsD,UAAUf,CAAV,EAAa;AACtF,WAAOA,CAAP;AACD,GAFoB,GAEjBgB,SAFJ;;AAIA,MAAI,CAACG,SAAL,EAAgB;AACd,WAAOL,WAAW,CAAC/C,KAAD,CAAX,GAAqB,UAAUiC,CAAV,EAAaqB,KAAb,EAAoB;AAC9C,aAAON,UAAU,CAACM,KAAD,CAAjB;AACD,KAFM,GAEHD,cAFJ;AAGD,GAJD,MAIO;AACL,QAAIE,iBAAiB,GAAGH,SAAS,IAAIlF,OAAO,CAACkF,SAAD,CAA5C;;AAEA,QAAII,cAAc,GAAGzF,QAAQ,CAACD,OAAO,CAACsF,SAAD,CAAR,EAAqB,UAAUK,CAAV,EAAa;AAC7D,aAAOA,CAAP;AACD,KAF4B,CAA7B;;AAIA,QAAIC,SAAS,GAAGF,cAAc,CAACG,GAAf,CAAmB,UAAUC,IAAV,EAAgB;AACjD,aAAOL,iBAAiB,CAACK,IAAD,CAAxB;AACD,KAFe,CAAhB,CAPK,CASD;;AAEJ,QAAIC,SAAS,GAAG,CAAC,EAAD,EAAKjD,MAAL,CAAYpC,kBAAkB,CAACkF,SAAD,CAA9B,EAA2C,CAAC,EAAD,CAA3C,CAAhB;AACA,WAAO,UAAUzB,CAAV,EAAa;AAClB,aAAO4B,SAAS,CAAC5B,CAAD,CAAhB;AACD,KAFD;AAGD;AACF;;AAED,SAAS6B,cAAT,CAAwB9D,KAAxB,EAA+B;AAC7B,MAAIgB,IAAI,GAAGjB,OAAO,CAACC,KAAD,CAAlB;AACA,MAAIoD,SAAS,GAAGpD,KAAK,CAACoD,SAAN,IAAmBpD,KAAK,CAACoD,SAAN,CAAgBpC,IAAhB,CAAnC;AACA,MAAI+C,UAAU,GAAG1E,KAAK,CAACE,OAAN,CAAcS,KAAK,CAAC+D,UAApB,IAAkC/D,KAAK,CAAC+D,UAAxC,GAAqD/D,KAAK,CAAC+D,UAAN,IAAoB/D,KAAK,CAAC+D,UAAN,CAAiB/C,IAAjB,CAA1F;AACA,MAAIgD,mBAAmB,GAAGD,UAAU,IAAInE,UAAU,CAACqE,mBAAX,CAA+BF,UAA/B,CAAd,GAA2DA,UAAU,CAACJ,GAAX,CAAe,UAAUC,IAAV,EAAgB;AAClH,WAAOR,SAAS,CAACQ,IAAD,CAAhB;AACD,GAFoF,CAA3D,GAErBX,SAFL;;AAIA,MAAIiB,kBAAkB,GAAGd,SAAS,IAAItF,OAAO,CAACsF,SAAD,CAA7C;;AAEA,SAAOY,mBAAmB,IAAIA,mBAAmB,CAACtE,MAApB,KAA+B,CAAtD,GAA0DsE,mBAA1D,GAAgFE,kBAAvF;AACD;;AAED,SAASC,YAAT,CAAsBnE,KAAtB,EAA6B;AAC3B,MAAIgD,UAAU,GAAGhD,KAAK,CAACgD,UAAvB;AAAA,MACIoB,UAAU,GAAGpE,KAAK,CAACoE,UADvB;AAEA,MAAIpD,IAAI,GAAGjB,OAAO,CAACC,KAAD,CAAlB;AACA,MAAIoD,SAAS,GAAGpD,KAAK,CAACoD,SAAN,IAAmBpD,KAAK,CAACoD,SAAN,CAAgBpC,IAAhB,CAAnC;;AAEA,MAAIqD,kBAAkB,GAAG,YAAY;AACnC,QAAI,CAACD,UAAD,IAAe,CAAC/E,KAAK,CAACE,OAAN,CAAc6E,UAAd,CAApB,EAA+C;AAC7C,aAAOnB,SAAP;AACD;;AAED,WAAOrD,UAAU,CAACsD,eAAX,CAA2BkB,UAA3B,IAAyCA,UAAU,CAACT,GAAX,CAAe,UAAUW,CAAV,EAAa9E,CAAb,EAAgB;AAC7E,aAAOA,CAAP;AACD,KAF+C,CAAzC,GAEF4E,UAFL;AAGD,GARD;;AAUA,MAAIG,KAAK,GAAGvB,UAAZ;;AAEA,MAAII,SAAJ,EAAe;AACbmB,IAAAA,KAAK,GAAGT,cAAc,CAAC9D,KAAD,CAAtB;AACD;;AAED,MAAIgD,UAAU,IAAIpD,UAAU,CAACsD,eAAX,CAA2BF,UAA3B,CAAlB,EAA0D;AACxDuB,IAAAA,KAAK,GAAGnB,SAAS,GAAGJ,UAAU,CAACW,GAAX,CAAe,UAAUC,IAAV,EAAgB;AACjD,aAAOR,SAAS,CAACQ,IAAD,CAAhB;AACD,KAFmB,CAAH,GAEZ5F,MAAM,CAAC,CAAD,EAAIgF,UAAU,CAACtD,MAAX,GAAoB,CAAxB,CAFX;AAGD;;AAED,MAAI8E,SAAS,GAAGD,KAAK,GAAGtG,KAAK,CAACsG,KAAD,CAAR,GAAkBF,kBAAkB,CAACrE,KAAD,CAAzD;;AAEA,MAAIyE,cAAc,GAAG,UAAUhG,GAAV,EAAe;AAClC,QAAIiG,YAAY,GAAG,EAAnB;AACA,QAAIlD,MAAM,GAAGxB,KAAK,CAACwB,MAAN,IAAgBxB,KAAK,CAACwB,MAAN,CAAaR,IAAb,CAAhB,IAAsChB,KAAK,CAACwB,MAAzD;;AAEA,QAAI/C,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACkG,OAAJ,CAAY,UAAUL,CAAV,EAAahB,KAAb,EAAoB;AAC9B,YAAIjE,KAAK,CAACE,OAAN,CAAciC,MAAd,CAAJ,EAA2B;AACzB,cAAI8C,CAAC,IAAI1E,UAAU,CAACgF,WAAX,CAAuBpD,MAAvB,CAAL,IAAuC8C,CAAC,IAAI1E,UAAU,CAACiF,WAAX,CAAuBrD,MAAvB,CAAhD,EAAgF;AAC9EkD,YAAAA,YAAY,CAACI,IAAb,CAAkB;AAChBC,cAAAA,KAAK,EAAET,CADS;AAEhBhB,cAAAA,KAAK,EAAEA;AAFS,aAAlB;AAID;AACF,SAPD,MAOO;AACLoB,UAAAA,YAAY,CAACI,IAAb,CAAkB;AAChBC,YAAAA,KAAK,EAAET,CADS;AAEhBhB,YAAAA,KAAK,EAAEA;AAFS,WAAlB;AAID;AACF,OAdD;AAeA,aAAOoB,YAAP;AACD,KAjBD,MAiBO,OAAOzB,SAAP;AACR,GAtBD;;AAwBA,SAAO5D,KAAK,CAACE,OAAN,CAAciF,SAAd,KAA4BA,SAAS,CAAC9E,MAAtC,GAA+C+E,cAAc,CAACD,SAAD,CAA7D,GAA2EvB,SAAlF;AACD;;AAED,OAAO,SAAS+B,aAAT,CAAuBhF,KAAvB,EAA8BiF,KAA9B,EAAqC;AAC1C,MAAIb,UAAU,GAAGpE,KAAK,CAACoE,UAAvB;AACA,MAAIpD,IAAI,GAAGjB,OAAO,CAACC,KAAD,CAAlB;AACA,MAAIoD,SAAS,GAAGpD,KAAK,CAACoD,SAAN,IAAmBpD,KAAK,CAACoD,SAAN,CAAgBpC,IAAhB,CAAnC;;AAEA,MAAI,CAACoD,UAAL,EAAiB;AACf,QAAIc,iBAAiB,GAAG/B,oBAAoB,CAACnD,KAAD,CAA5C;AACA,QAAImF,eAAe,GAAGF,KAAK,CAACb,UAAN,IAAoBhG,WAAW,CAAC6G,KAAK,CAACb,UAAP,CAA/B,GAAoDa,KAAK,CAACb,UAAN,EAApD,GAAyE,UAAUnC,CAAV,EAAa;AAC1G,aAAOA,CAAP;AACD,KAFD;AAGA,WAAOiD,iBAAiB,IAAIC,eAA5B;AACD,GAND,MAMO,IAAIf,UAAU,IAAI/E,KAAK,CAACE,OAAN,CAAc6E,UAAd,CAAlB,EAA6C;AAClD,QAAII,SAAS,GAAGL,YAAY,CAACnE,KAAD,CAA5B;AACA,QAAIoF,gBAAgB,GAAGZ,SAAS,GAAGA,SAAS,CAACb,GAAV,CAAc,UAAU0B,CAAV,EAAa;AAC5D,aAAOA,CAAC,CAAC/B,KAAT;AACD,KAFkC,CAAH,GAE3BL,SAFL;AAGA,QAAIqC,kBAAkB,GAAGlB,UAAU,CAACmB,MAAX,CAAkB,UAAUjB,CAAV,EAAahB,KAAb,EAAoB;AAC7D,aAAO8B,gBAAgB,CAACI,QAAjB,CAA0BlC,KAA1B,CAAP;AACD,KAFwB,CAAzB;AAGA,WAAO,UAAUrB,CAAV,EAAaqB,KAAb,EAAoB;AACzB,aAAOgC,kBAAkB,CAAChC,KAAD,CAAzB;AACD,KAFD;AAGD,GAXM,MAWA,IAAIc,UAAU,IAAIhG,WAAW,CAACgG,UAAD,CAA7B,EAA2C;AAChD,QAAIqB,gBAAgB,GAAG,UAAU7B,IAAV,EAAgBN,KAAhB,EAAuBiB,KAAvB,EAA8B;AACnD,UAAIhB,iBAAiB,GAAGrF,OAAO,CAACkF,SAAD,CAA/B;;AAEA,UAAIsC,eAAe,GAAGnB,KAAK,CAACZ,GAAN,CAAU,UAAUW,CAAV,EAAa;AAC3C,eAAOf,iBAAiB,CAACe,CAAD,CAAxB;AACD,OAFqB,CAAtB;AAGA,aAAOtE,KAAK,CAACoE,UAAN,CAAiBb,iBAAiB,CAACK,IAAD,CAAlC,EAA0CN,KAA1C,EAAiDoC,eAAjD,CAAP;AACD,KAPD;;AASA,WAAOtC,SAAS,GAAGqC,gBAAH,GAAsBrB,UAAtC;AACD,GAXM,MAWA;AACL,WAAO,UAAUnC,CAAV,EAAa;AAClB,aAAOA,CAAP;AACD,KAFD;AAGD;AACF;;AAED,SAAS0D,eAAT,CAAyBpB,KAAzB,EAAgCqB,SAAhC,EAA2C;AACzC,MAAI,CAACA,SAAD,IAAc,CAACvG,KAAK,CAACE,OAAN,CAAcgF,KAAd,CAAf,IAAuCA,KAAK,CAAC7E,MAAN,IAAgBkG,SAA3D,EAAsE;AACpE,WAAOrB,KAAP;AACD;;AAED,MAAIsB,CAAC,GAAGjE,IAAI,CAACkE,KAAL,CAAWvB,KAAK,CAAC7E,MAAN,GAAekG,SAA1B,CAAR;AACA,SAAOrB,KAAK,CAACgB,MAAN,CAAa,UAAU7D,CAAV,EAAalC,CAAb,EAAgB;AAClC,WAAOA,CAAC,GAAGqG,CAAJ,KAAU,CAAjB;AACD,GAFM,CAAP;AAGD;;AAED,OAAO,SAASE,QAAT,CAAkB/F,KAAlB,EAAyBiF,KAAzB,EAAgCe,UAAhC,EAA4C;AACjD,MAAIJ,SAAS,GAAG5F,KAAK,CAAC4F,SAAtB;AACA,MAAIpB,SAAS,GAAGL,YAAY,CAACnE,KAAD,CAA5B;AACA,MAAIgD,UAAU,GAAGwB,SAAS,GAAGA,SAAS,CAACb,GAAV,CAAc,UAAU0B,CAAV,EAAa;AACtD,WAAOA,CAAC,CAACN,KAAT;AACD,GAF4B,CAAH,GAErB9B,SAFL;;AAIA,MAAID,UAAJ,EAAgB;AACd,WAAO2C,eAAe,CAAC3C,UAAD,EAAa4C,SAAb,CAAtB;AACD,GAFD,MAEO,IAAIX,KAAK,CAACV,KAAN,IAAenG,WAAW,CAAC6G,KAAK,CAACV,KAAP,CAA9B,EAA6C;AAClD;AACA,QAAI0B,gBAAgB,GAAGL,SAAS,IAAI,CAApC;AACA,QAAIM,UAAU,GAAGjB,KAAK,CAACV,KAAN,CAAY0B,gBAAZ,CAAjB;AACA,QAAIE,eAAe,GAAG9G,KAAK,CAACE,OAAN,CAAc2G,UAAd,KAA6BA,UAAU,CAACxG,MAAxC,GAAiDwG,UAAjD,GAA8DjB,KAAK,CAACzD,MAAN,EAApF;AACA,QAAI+C,KAAK,GAAGoB,eAAe,CAACQ,eAAD,EAAkBP,SAAlB,CAA3B;;AAEA,QAAII,UAAJ,EAAgB;AACd,UAAII,aAAa,GAAGvI,SAAS,CAAC0G,KAAD,EAAQ,CAAR,CAAT,GAAsB3G,QAAQ,CAAC2G,KAAD,EAAQ,CAAR,CAA9B,GAA2CA,KAA/D;AACA,aAAO6B,aAAa,CAAC1G,MAAd,GAAuB0G,aAAvB,GAAuC7B,KAA9C;AACD;;AAED,WAAOA,KAAP;AACD;;AAED,SAAOU,KAAK,CAACzD,MAAN,EAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS6E,iBAAT,CAA2BrG,KAA3B,EAAkCgB,IAAlC,EAAwC;AACtC,MAAIsF,KAAK,GAAGtG,KAAK,CAACsG,KAAlB;AAAA,MACIC,iBAAiB,GAAGvG,KAAK,CAACwG,UAD9B;AAAA,MAEIA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,CAA/B,GAAmCA,iBAFpD;AAAA,MAGIE,eAAe,GAAGzG,KAAK,CAAC0G,QAH5B;AAAA,MAIIA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,GAA7B,GAAmCA,eAJlD;AAKA,MAAIjC,SAAS,GAAGL,YAAY,CAACnE,KAAD,CAA5B;AACA,MAAIgD,UAAU,GAAGwB,SAAS,GAAGA,SAAS,CAACb,GAAV,CAAc,UAAU0B,CAAV,EAAa;AACtD,WAAOA,CAAC,CAACN,KAAT;AACD,GAF4B,CAAH,GAErB9B,SAFL;;AAIA,MAAI,CAAC5D,KAAK,CAACE,OAAN,CAAcyD,UAAd,CAAL,EAAgC;AAC9B,WAAOC,SAAP;AACD;;AAED,MAAI0D,SAAS,GAAG9G,MAAM,CAAC+G,eAAP,CAAuB5G,KAAvB,EAA8BgB,IAA9B,CAAhB;AACA,MAAI6F,SAAS,GAAGhH,MAAM,CAACiH,eAAP,CAAuB9G,KAAvB,EAA8BgB,IAA9B,CAAhB;AACA,MAAI+F,WAAW,GAAGhE,WAAW,CAAC/C,KAAD,CAA7B;AACA,MAAIuE,KAAK,GAAGvB,UAAU,CAACW,GAAX,CAAe,UAAUoB,KAAV,EAAiB;AAC1C,WAAO,CAACA,KAAR;AACD,GAFW,CAAZ;AAGA,MAAIiC,UAAU,GAAGD,WAAW,GAAG,CAAH,GAAOnH,UAAU,CAACgF,WAAX,CAAuBL,KAAvB,CAAnC;AACA,MAAI0C,UAAU,GAAGF,WAAW,GAAG/D,UAAU,CAACtD,MAAd,GAAuBE,UAAU,CAACiF,WAAX,CAAuBN,KAAvB,CAAnD;AACA,MAAI1C,GAAG,GAAG8E,SAAS,KAAK1D,SAAd,GAA0B0D,SAA1B,GAAsCK,UAAhD;AACA,MAAIhF,GAAG,GAAG6E,SAAS,KAAK5D,SAAd,GAA0B4D,SAA1B,GAAsCI,UAAhD;AACA,MAAIC,aAAa,GAAGrH,MAAM,CAACsH,mBAAP,CAA2BtF,GAA3B,EAAgCG,GAAhC,CAApB;AACA,MAAIR,MAAM,GAAG8E,KAAK,IAAItF,IAAI,KAAK,GAAlB,IAAyBY,IAAI,CAACwF,GAAL,CAASZ,UAAU,GAAGE,QAAtB,MAAoC,GAA7D,GAAmE7G,MAAM,CAACwH,kBAAP,CAA0BH,aAA1B,EAAyC3C,KAAzC,CAAnE,GAAqH2C,aAAlI;;AAEA,MAAI1E,UAAU,CAACxC,KAAD,CAAV,IAAqB,CAACsG,KAA1B,EAAiC;AAC/B9E,IAAAA,MAAM,CAAC8F,OAAP;AACD;;AAED,SAAO9F,MAAP;AACD,C,CAAC;;;AAGF,OAAO,SAAS+F,SAAT,CAAmBvH,KAAnB,EAA0BgB,IAA1B,EAAgC;AACrC,MAAIwG,YAAY,GAAGzH,OAAO,CAACC,KAAD,CAA1B;;AAEA,MAAIgB,IAAI,IAAIA,IAAI,KAAKwG,YAArB,EAAmC;AACjC,WAAOvE,SAAP;AACD;;AAED,SAAOpD,MAAM,CAAC4H,oBAAP,CAA4BpB,iBAA5B,EAA+CrG,KAA/C,EAAsDwH,YAAtD,CAAP;AACD;AACD,OAAO,SAASE,YAAT,CAAsB1H,KAAtB,EAA6BgB,IAA7B,EAAmC;AACxC,MAAI,CAAChB,KAAK,CAAC2H,SAAX,EAAsB;AACpB,WAAO1E,SAAP;AACD;;AAED,MAAI2E,SAAS,GAAG5G,IAAI,KAAK,GAAT,GAAe,GAAf,GAAqB,GAArC;AACA,MAAIiE,KAAK,GAAG9G,SAAS,CAAC6B,KAAK,CAACiF,KAAP,CAAT,IAA0B7G,WAAW,CAAC4B,KAAK,CAACiF,KAAN,CAAY2C,SAAZ,CAAD,CAArC,GAAgE5H,KAAK,CAACiF,KAAN,CAAY2C,SAAZ,CAAhE,GAAyF3E,SAArG;;AAEA,MAAI,CAACgC,KAAL,EAAY;AACV,WAAOhC,SAAP;AACD;;AAED,MAAI4E,aAAa,GAAG7G,IAAI,KAAK,GAAT,GAAe,GAAf,GAAqB,GAAzC;AACA,MAAIoC,SAAS,GAAGjF,SAAS,CAAC6B,KAAK,CAACoD,SAAP,CAAT,IAA8BpD,KAAK,CAACoD,SAAN,CAAgByE,aAAhB,CAA9C;AACA,MAAIF,SAAS,GAAGvE,SAAS,IAAI,OAAOpD,KAAK,CAAC2H,SAAb,KAA2B,QAAxC,GAAmDvE,SAAS,CAACpD,KAAK,CAAC2H,SAAP,CAA5D,GAAgF3H,KAAK,CAAC2H,SAAtG;AACA,SAAO1C,KAAK,CAAC0C,SAAD,CAAZ;AACD;AACD,OAAO,SAASG,WAAT,CAAqB9H,KAArB,EAA4B+H,aAA5B,EAA2C;AAChD,MAAI,CAAC5J,SAAS,CAAC6B,KAAK,CAACgI,KAAP,CAAd,EAA6B;AAC3B,WAAOlI,OAAO,CAACgI,WAAR,CAAoB9H,KAApB,EAA2B+H,aAA3B,EAA0C,MAA1C,CAAP;AACD;;AAED,MAAIpH,IAAI,GAAG,MAAX;;AAEA,MAAIX,KAAK,CAACC,aAAN,IAAuBD,KAAK,CAACgI,KAAN,CAAY/H,aAAvC,EAAsD;AACpDU,IAAAA,IAAI,GAAG,eAAP;AACD,GAFD,MAEO,IAAI,CAACX,KAAK,CAACC,aAAP,IAAwBD,KAAK,CAACgI,KAAN,CAAYC,eAAxC,EAAyD;AAC9DtH,IAAAA,IAAI,GAAG,iBAAP;AACD;;AAED,MAAIA,IAAI,KAAK,MAAb,EAAqB;AACnB,WAAOb,OAAO,CAACgI,WAAR,CAAoB9H,KAApB,EAA2B+H,aAA3B,EAA0C,MAA1C,CAAP;AACD;;AAED,MAAIG,SAAS,GAAG5J,SAAS,CAAC,EAAD,EAAK0B,KAAK,CAACgI,KAAN,CAAYrH,IAAZ,CAAL,EAAwBX,KAAK,CAACgI,KAAN,CAAYhH,IAApC,CAAzB;;AAEA,MAAIgH,KAAK,GAAGzJ,OAAO,CAAC,EAAD,EAAKyB,KAAK,CAACgI,KAAX,EAAkB;AACnChH,IAAAA,IAAI,EAAEkH;AAD6B,GAAlB,CAAnB;;AAIA,SAAOpI,OAAO,CAACgI,WAAR,CAAoBvJ,OAAO,CAAC,EAAD,EAAKyB,KAAL,EAAY;AAC5CgI,IAAAA,KAAK,EAAEA;AADqC,GAAZ,CAA3B,EAEHD,aAFG,EAEY,MAFZ,CAAP;AAGD","sourcesContent":["import _without from \"lodash/without\";\nimport _includes from \"lodash/includes\";\nimport _values from \"lodash/values\";\nimport _orderBy from \"lodash/orderBy\";\nimport _range from \"lodash/range\";\nimport _uniq from \"lodash/uniq\";\nimport _invert from \"lodash/invert\";\nimport _isObject from \"lodash/isObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _identity from \"lodash/identity\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n/* eslint-disable func-style */\nimport React from \"react\";\nimport * as Collection from \"./collection\";\nimport * as Domain from \"./domain\";\nimport * as Helpers from \"./helpers\";\n/**\n * Returns the axis (x or y) of a particular axis component\n * @param {Object} props: the props object.\n * @param {Boolean} horizontal: true for horizontal charts\n * @returns {String} the dimension appropriate for the axis given its props\n */\n\nexport function getAxis(props) {\n  var dependentAxis = props.dependentAxis;\n  return dependentAxis ? \"y\" : \"x\";\n}\n/**\n * Returns all axis components that pass a given predicate\n * @param {Array} childComponents: an array of children\n * @param {Function} predicate: a predicate function that will be called with each\n * @returns {Array} all axis components that pass the given predicate or []\n */\n\nexport function findAxisComponents(childComponents, predicate) {\n  predicate = predicate || _identity;\n\n  var findAxes = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && predicate(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        return memo.concat(findAxes(React.Children.toArray(child.props.children)));\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findAxes(childComponents);\n}\n/**\n * Returns a single axis component of the desired axis type (x or y)\n * @param {Array} childComponents: an array of children\n * @param {String} axis: desired axis either \"x\" or \"y\".\n * @returns {ReactComponent} an axis component of the desired axis or undefined\n */\n\nexport function getAxisComponent(childComponents, axis) {\n  var matchesAxis = function (component) {\n    var type = component.type.getAxis(component.props);\n    return type === axis;\n  };\n\n  return findAxisComponents(childComponents, matchesAxis)[0];\n}\n/**\n * Returns all axis components of the desired axis type (x or y) along with any\n * parent components excluding VictoryChart\n * @param {Array} childComponents: an optional array of children.\n * @param {String} type: desired axis either \"dependent\" or \"independent\".\n * @returns {ReactComponent} an axis component of the desired type or undefined\n */\n\nexport function getAxisComponentsWithParent(childComponents, type) {\n  var matchesType = function (child) {\n    return type === \"dependent\" ? child.props.dependentAxis : !child.props.dependentAxis;\n  };\n\n  var findComponents = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && matchesType(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        var childAxis = findComponents(React.Children.toArray(child.props.children));\n        return childAxis.length > 0 ? memo.concat(child) : memo;\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findComponents(childComponents);\n}\nexport function getOrigin(domain) {\n  var getSingleOrigin = function (d) {\n    var domainMin = Math.min.apply(Math, _toConsumableArray(d));\n    var domainMax = Math.max.apply(Math, _toConsumableArray(d));\n    return domainMax < 0 ? domainMax : Math.max(0, domainMin);\n  };\n\n  return {\n    x: Collection.containsDates(domain.x) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.x))) : getSingleOrigin(domain.x),\n    y: Collection.containsDates(domain.y) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.y))) : getSingleOrigin(domain.y)\n  };\n}\nexport function getOriginSign(origin, domain) {\n  var getSign = function () {\n    return origin <= 0 && Math.max.apply(Math, _toConsumableArray(domain)) <= 0 ? \"negative\" : \"positive\";\n  };\n\n  return Collection.containsDates(domain) ? \"positive\" : getSign();\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when the axis is vertical\n */\n\nexport function isVertical(props) {\n  var orientation = props.orientation || (props.dependentAxis ? \"left\" : \"bottom\");\n  var vertical = {\n    top: false,\n    bottom: false,\n    left: true,\n    right: true\n  };\n  return vertical[orientation];\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when tickValues contain strings\n */\n\nexport function stringTicks(props) {\n  return props.tickValues !== undefined && Collection.containsStrings(props.tickValues);\n}\n\nfunction getDefaultTickFormat(props) {\n  var tickValues = props.tickValues;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var fallbackFormat = tickValues && !Collection.containsDates(tickValues) ? function (x) {\n    return x;\n  } : undefined;\n\n  if (!stringMap) {\n    return stringTicks(props) ? function (x, index) {\n      return tickValues[index];\n    } : fallbackFormat;\n  } else {\n    var invertedStringMap = stringMap && _invert(stringMap);\n\n    var tickValueArray = _orderBy(_values(stringMap), function (n) {\n      return n;\n    });\n\n    var dataNames = tickValueArray.map(function (tick) {\n      return invertedStringMap[tick];\n    }); // string ticks should have one tick of padding at the beginning\n\n    var dataTicks = [\"\"].concat(_toConsumableArray(dataNames), [\"\"]);\n    return function (x) {\n      return dataTicks[x];\n    };\n  }\n}\n\nfunction getStringTicks(props) {\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var categories = Array.isArray(props.categories) ? props.categories : props.categories && props.categories[axis];\n  var ticksFromCategories = categories && Collection.containsOnlyStrings(categories) ? categories.map(function (tick) {\n    return stringMap[tick];\n  }) : undefined;\n\n  var ticksFromStringMap = stringMap && _values(stringMap);\n\n  return ticksFromCategories && ticksFromCategories.length !== 0 ? ticksFromCategories : ticksFromStringMap;\n}\n\nfunction getTickArray(props) {\n  var tickValues = props.tickValues,\n      tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  var getTicksFromFormat = function () {\n    if (!tickFormat || !Array.isArray(tickFormat)) {\n      return undefined;\n    }\n\n    return Collection.containsStrings(tickFormat) ? tickFormat.map(function (t, i) {\n      return i;\n    }) : tickFormat;\n  };\n\n  var ticks = tickValues;\n\n  if (stringMap) {\n    ticks = getStringTicks(props);\n  }\n\n  if (tickValues && Collection.containsStrings(tickValues)) {\n    ticks = stringMap ? tickValues.map(function (tick) {\n      return stringMap[tick];\n    }) : _range(1, tickValues.length + 1);\n  }\n\n  var tickArray = ticks ? _uniq(ticks) : getTicksFromFormat(props);\n\n  var buildTickArray = function (arr) {\n    var newTickArray = [];\n    var domain = props.domain && props.domain[axis] || props.domain;\n\n    if (arr) {\n      arr.forEach(function (t, index) {\n        if (Array.isArray(domain)) {\n          if (t >= Collection.getMinValue(domain) && t <= Collection.getMaxValue(domain)) {\n            newTickArray.push({\n              value: t,\n              index: index\n            });\n          }\n        } else {\n          newTickArray.push({\n            value: t,\n            index: index\n          });\n        }\n      });\n      return newTickArray;\n    } else return undefined;\n  };\n\n  return Array.isArray(tickArray) && tickArray.length ? buildTickArray(tickArray) : undefined;\n}\n\nexport function getTickFormat(props, scale) {\n  var tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  if (!tickFormat) {\n    var defaultTickFormat = getDefaultTickFormat(props);\n    var scaleTickFormat = scale.tickFormat && _isFunction(scale.tickFormat) ? scale.tickFormat() : function (x) {\n      return x;\n    };\n    return defaultTickFormat || scaleTickFormat;\n  } else if (tickFormat && Array.isArray(tickFormat)) {\n    var tickArray = getTickArray(props);\n    var tickArrayIndices = tickArray ? tickArray.map(function (v) {\n      return v.index;\n    }) : undefined;\n    var filteredTickFormat = tickFormat.filter(function (t, index) {\n      return tickArrayIndices.includes(index);\n    });\n    return function (x, index) {\n      return filteredTickFormat[index];\n    };\n  } else if (tickFormat && _isFunction(tickFormat)) {\n    var applyStringTicks = function (tick, index, ticks) {\n      var invertedStringMap = _invert(stringMap);\n\n      var stringTickArray = ticks.map(function (t) {\n        return invertedStringMap[t];\n      });\n      return props.tickFormat(invertedStringMap[tick], index, stringTickArray);\n    };\n\n    return stringMap ? applyStringTicks : tickFormat;\n  } else {\n    return function (x) {\n      return x;\n    };\n  }\n}\n\nfunction downsampleTicks(ticks, tickCount) {\n  if (!tickCount || !Array.isArray(ticks) || ticks.length <= tickCount) {\n    return ticks;\n  }\n\n  var k = Math.floor(ticks.length / tickCount);\n  return ticks.filter(function (d, i) {\n    return i % k === 0;\n  });\n}\n\nexport function getTicks(props, scale, filterZero) {\n  var tickCount = props.tickCount;\n  var tickArray = getTickArray(props);\n  var tickValues = tickArray ? tickArray.map(function (v) {\n    return v.value;\n  }) : undefined;\n\n  if (tickValues) {\n    return downsampleTicks(tickValues, tickCount);\n  } else if (scale.ticks && _isFunction(scale.ticks)) {\n    // eslint-disable-next-line no-magic-numbers\n    var defaultTickCount = tickCount || 5;\n    var scaleTicks = scale.ticks(defaultTickCount);\n    var scaledTickArray = Array.isArray(scaleTicks) && scaleTicks.length ? scaleTicks : scale.domain();\n    var ticks = downsampleTicks(scaledTickArray, tickCount);\n\n    if (filterZero) {\n      var filteredTicks = _includes(ticks, 0) ? _without(ticks, 0) : ticks;\n      return filteredTicks.length ? filteredTicks : ticks;\n    }\n\n    return ticks;\n  }\n\n  return scale.domain();\n}\n/**\n * Returns a domain based tickValues\n * @param {Object} props: the props object\n * @param {String} axis: either x or y\n * @returns {Array} returns a domain from tickValues\n */\n//eslint-disable-next-line max-statements\n\nfunction getDomainFromData(props, axis) {\n  var polar = props.polar,\n      _props$startAngle = props.startAngle,\n      startAngle = _props$startAngle === void 0 ? 0 : _props$startAngle,\n      _props$endAngle = props.endAngle,\n      endAngle = _props$endAngle === void 0 ? 360 : _props$endAngle;\n  var tickArray = getTickArray(props);\n  var tickValues = tickArray ? tickArray.map(function (v) {\n    return v.value;\n  }) : undefined;\n\n  if (!Array.isArray(tickValues)) {\n    return undefined;\n  }\n\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var tickStrings = stringTicks(props);\n  var ticks = tickValues.map(function (value) {\n    return +value;\n  });\n  var defaultMin = tickStrings ? 1 : Collection.getMinValue(ticks);\n  var defaultMax = tickStrings ? tickValues.length : Collection.getMaxValue(ticks);\n  var min = minDomain !== undefined ? minDomain : defaultMin;\n  var max = maxDomain !== undefined ? maxDomain : defaultMax;\n  var initialDomain = Domain.getDomainFromMinMax(min, max);\n  var domain = polar && axis === \"x\" && Math.abs(startAngle - endAngle) === 360 ? Domain.getSymmetricDomain(initialDomain, ticks) : initialDomain;\n\n  if (isVertical(props) && !polar) {\n    domain.reverse();\n  }\n\n  return domain;\n} // exposed for use by VictoryChart\n\n\nexport function getDomain(props, axis) {\n  var inherentAxis = getAxis(props);\n\n  if (axis && axis !== inherentAxis) {\n    return undefined;\n  }\n\n  return Domain.createDomainFunction(getDomainFromData)(props, inherentAxis);\n}\nexport function getAxisValue(props, axis) {\n  if (!props.axisValue) {\n    return undefined;\n  }\n\n  var scaleAxis = axis === \"x\" ? \"y\" : \"x\";\n  var scale = _isObject(props.scale) && _isFunction(props.scale[scaleAxis]) ? props.scale[scaleAxis] : undefined;\n\n  if (!scale) {\n    return undefined;\n  }\n\n  var stringMapAxis = axis === \"x\" ? \"y\" : \"x\";\n  var stringMap = _isObject(props.stringMap) && props.stringMap[stringMapAxis];\n  var axisValue = stringMap && typeof props.axisValue === \"string\" ? stringMap[props.axisValue] : props.axisValue;\n  return scale(axisValue);\n}\nexport function modifyProps(props, fallbackProps) {\n  if (!_isObject(props.theme)) {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var role = \"axis\";\n\n  if (props.dependentAxis && props.theme.dependentAxis) {\n    role = \"dependentAxis\";\n  } else if (!props.dependentAxis && props.theme.independentAxis) {\n    role = \"independentAxis\";\n  }\n\n  if (role === \"axis\") {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var axisTheme = _defaults({}, props.theme[role], props.theme.axis);\n\n  var theme = _assign({}, props.theme, {\n    axis: axisTheme\n  });\n\n  return Helpers.modifyProps(_assign({}, props, {\n    theme: theme\n  }), fallbackProps, \"axis\");\n}"]},"metadata":{},"sourceType":"module"}